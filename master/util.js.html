<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>util.js - Documentation</title>

    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="Client.html">Client</a><ul class='methods'><li data-type='method'><a href="Client.html#getConfigOption">getConfigOption</a></li><li data-type='method'><a href="Client.html#loadHelp">loadHelp</a></li><li data-type='method'><a href="Client.html#setConfigOption">setConfigOption</a></li></ul></li><li><a href="Command.html">Command</a><ul class='methods'><li data-type='method'><a href="Command.html#registerSubCommand">registerSubCommand</a></li><li data-type='method'><a href="Command.html#setAlias">setAlias</a></li><li data-type='method'><a href="Command.html#setSubAlias">setSubAlias</a></li></ul></li><li><a href="CommandHandler.html">CommandHandler</a><ul class='methods'><li data-type='method'><a href="CommandHandler.html#getCommand">getCommand</a></li></ul></li><li><a href="ForgeRegistry.html">ForgeRegistry</a><ul class='methods'><li data-type='method'><a href="ForgeRegistry.html#registerAlias">registerAlias</a></li><li data-type='method'><a href="ForgeRegistry.html#registerCommand">registerCommand</a></li><li data-type='method'><a href="ForgeRegistry.html#registerPlugin">registerPlugin</a></li><li data-type='method'><a href="ForgeRegistry.html#removeCommand">removeCommand</a></li><li data-type='method'><a href="ForgeRegistry.html#removePlugin">removePlugin</a></li></ul></li><li><a href="Plugin.html">Plugin</a><ul class='methods'><li data-type='method'><a href="Plugin.html#registerCommand">registerCommand</a></li><li data-type='method'><a href="Plugin.html#removeCommand">removeCommand</a></li></ul></li></ul><h3>Externals</h3><ul><li><a href="external-Client.html">Client</a></li><li><a href="external-ClientOptions.html">ClientOptions</a></li><li><a href="external-Collection.html">Collection</a></li><li><a href="external-Guild.html">Guild</a></li><li><a href="external-Message.html">Message</a></li></ul><h3>Events</h3><ul><li><a href="Client.html#event:command">command</a></li><li><a href="Client.html#event:plainMessage">plainMessage</a></li><li><a href="Plugin.html#event:load">load</a></li></ul><h3>Interfaces</h3><ul><li><a href="GuildExtention.html">GuildExtention</a><ul class='methods'><li data-type='method'><a href="GuildExtention.html#changePrefix">changePrefix</a></li><li data-type='method'><a href="GuildExtention.html#disablePlugin">disablePlugin</a></li><li data-type='method'><a href="GuildExtention.html#enablePlugin">enablePlugin</a></li><li data-type='method'><a href="GuildExtention.html#registerCommand">registerCommand</a></li><li data-type='method'><a href="GuildExtention.html#removeCommand">removeCommand</a></li></ul></li></ul><h3>Global</h3><ul><li><a href="global.html#openJSON">openJSON</a></li><li><a href="global.html#openJSONSync">openJSONSync</a></li><li><a href="global.html#writeJSON">writeJSON</a></li><li><a href="global.html#writeJSONSync">writeJSONSync</a></li></ul>
</nav>

<div id="main">
    
    <h1 class="page-title">util.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>const fs = require('fs');
if (!fs.existsSync('./configs')) fs.mkdirSync('./configs');

/**
 * Opens a json file and returns the data
 * @param {string} JSONFile The file to retrive data from
 * @returns {Promise&lt;Object>}
 */
function openJSON(JSONFile) {
  return new Promise((resolve, reject) => {
    fs.readFile(JSONFile, 'utf8', (err, data) => {
      if (err) return reject(err);
      return resolve(JSON.parse(data));
    });
  });
}

/**
 * Writes a json object to a file
 * @param {string} JSONFile The file to write to
 * @param {Object} JSONObject The object to write to file
 * @returns {Promise&lt;string>}
 */
function writeJSON(JSONFile, JSONObject) {
  return new Promise((resolve, reject) => {
    fs.writeFile(JSONFile, JSON.stringify(JSONObject, null, '\t'), 'utf8', (err) => {
      if (err) return reject(err);
      return resolve('File saved');
    });
  });
}

/**
 * Opens a json file and returns the data
 * @param {string} JSONFile The file to retrive data from
 * @returns {Object}
 */
function openJSONSync(JSONFile) {
  return JSON.parse(fs.readFileSync(JSONFile));
}

/**
 * Writes a json object to a file
 * @param {string} JSONFile The file to write to
 * @param {Object} JSONObject The object to write to file
 */
function writeJSONSync(JSONFile, JSONObject) {
  fs.writeFileSync(JSONFile, JSON.stringify(JSONObject, null, 't'));
}

function timeToMs(time) {
  var final = 0;
  var hms = time.split(':');
  for (var i = 0; i &lt; hms.length; i++) {
    var newfinal = final + (parseInt(hms[i]) * Math.pow(60, hms.length - (i + 1)));
    final = newfinal;
  }
  var ms = final * 1000;
  return ms;
}

function hasRole(user, role) {
  if (role === '@everyone') return true;

  const roles = user.roles.array();

  for (var i = 0; i &lt; roles.length; i++) {
    if (roles[i].name.toLowerCase() === role.toLowerCase()) return 1;
  }
  return 0;
}


function hasPerms(user, permission) {
  var roles = user.roles.array();

  for (var role in roles) {
    if (roles[role].hasPermission(permission)) return true;
  }
  return false;
}

function getSubcommands(command, levels) {
  let tabs = '    ';
  let subs = [];

  for (let level = 0; level &lt; levels--; level++) {
    tabs += '    ';
  }

  if (command.subCommands.size > 0) {
    command.subCommands.forEach(sub => {
      subs.push(getSubcommands(sub, levels));
    });
    return subs;
  } else {
    return tabs + command.id;
  }
}

exports.getSubcommands = getSubcommands;
exports.hasPerms = hasPerms;
exports.hasRole = hasRole;
exports.timeToMs = timeToMs;
exports.writeJSON = writeJSON;
exports.openJSON = openJSON;
exports.writeJSONSync = writeJSONSync;
exports.openJSONSync = openJSONSync;
</code></pre>
        </article>
    </section>




</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.3</a> on Mon Jan 09 2017 15:53:25 GMT+0000 (UTC) using the Minami theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>
</body>
</html>
